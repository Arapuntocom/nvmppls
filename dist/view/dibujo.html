<md-toolbar class="md-hue-2">
	<div class="md-toolbar-tools">
		<md-menu>
			<md-button class="md-icon-button" aria-label="Settings" ng-click="abrirMenuOpciones($mdMenu, $event)">
				 <md-icon md-svg-icon="dist/img/icons/other-icons/ic_menu_black_48px.svg"></md-icon>
			</md-button>
			<md-menu-content width="4">
        <md-menu-item>
          <md-button ng-click="preguntarSiGuardar($event)">
            <!--<md-icon  md-menu-align-target></md-icon>-->
            Nuevo modelo
          </md-button>
        </md-menu-item>
				<md-menu-item>
					<md-button ng-click="mostrarDialogAbrirModeloJson($event)">
						<!--<md-icon  md-menu-align-target></md-icon>-->
						Abrir modelo
					</md-button>
				</md-menu-item>
				<md-menu-item>
					<a id="downloadAnchorElem" class="md-menu-item" style="display:none"></a>
					<md-button ng-click="exportarModeloJson()">
						<!--<md-icon  md-menu-align-target></md-icon>-->
						Guardar modelo
						</md-button>
				</md-menu-item>
				<md-menu-item>
					<md-button ng-click="toggleModelo()">
						<!--<md-icon  md-menu-align-target></md-icon>-->
						Propiedades
						</md-button>
				</md-menu-item>
			</md-menu-content>
		</md-menu>
		<h2 md-truncate flex>
			<md-input-container  layout="center">
				<input type="text" style="color:white" id="nameModel" ng-model="model.name">
			</md-input-container>
		</h2>
	</div>
</md-toolbar>

<!-- botones para diagramar -->
<section>
	<md-list layout="row" layout-align="left center">
   <!--
		<md-list-item>
			<md-button aria-label="New" class="md-icon-button">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_add_black_48px.svg"></md-icon>
			</md-button>
		</md-list-item>

		<md-list-item>
			<md-button aria-label="Save" class="md-icon-button">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_save_black_18px.svg"></md-icon>
			</md-button>
		</md-list-item>
			|-->
		<md-list-item>
			<md-button aria-label="CicloConversacional" class="md-icon-button" ng-click="agregarCicloConversacional()">
				<md-icon md-svg-icon="dist/img/icons/novaplus-icons/cc48v2.svg"></md-icon>
			</md-button>
		</md-list-item>

		<md-list-item>
			<md-button aria-label="Decision" class="md-icon-button" ng-click="agregarEstacionOr()">
				<md-icon md-svg-icon="dist/img/icons/nova-icons/decision24.svg"></md-icon>
			</md-button>
		</md-list-item>

		<md-list-item>
			<md-button aria-label="Agregacion" class="md-icon-button" ng-click="agregarEstacionAnd()">
				<md-icon md-svg-icon="dist/img/icons/nova-icons/agregacion24.svg"></md-icon>
			</md-button>
		</md-list-item>

		<md-list-item>
			<md-button aria-label="Pertenencia" class="md-icon-button" ng-click="agregarEnlace('pertenencia')">
				<md-icon md-svg-icon="dist/img/icons/nova-icons/particiop24.svg"></md-icon>
			</md-button>
		</md-list-item>

		<md-list-item>
			<md-button aria-label="Excepcion" class="md-icon-button" ng-click="agregarEnlace('excepcion')">
				<md-icon md-svg-icon="dist/img/icons/nova-icons/excep24.svg"></md-icon>
			</md-button>
		</md-list-item>
			|
		<md-list-item>
			<md-button aria-label="Undo" class="md-icon-button">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_undo_black_48px.svg"></md-icon>
			</md-button>
		</md-list-item>

		<md-list-item>
			<md-button aria-label="Redo" class="md-icon-button">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_redo_black_48px.svg"></md-icon>
			</md-button>
		</md-list-item>
			|
		<md-list-item>
			<md-button aria-label="ZoomIn" class="md-icon-button" ng-click="zoom('acercar')">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_zoom_in_black_48px.svg"></md-icon>
			</md-button>
		</md-list-item>

		<md-list-item>
			<md-button aria-label="ZoomOut" class="md-icon-button" ng-click="zoom('alejar')">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_zoom_out_black_48px.svg"></md-icon>
			</md-button>
		</md-list-item>
			|
		<md-list-item>
			<md-button aria-label="Delete" class="md-icon-button" ng-click="removerElementoPresionado()">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_delete_black_48px.svg"></md-icon>
			</md-button>
		</md-list-item>


		<md-list-item>
			<md-button aria-label="RolesReporte" class="md-icon-button" ng-click="mostrarReporteRoles($event)">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_assignment_ind_black_48px.svg"></md-icon>
			</md-button>
		</md-list-item>
<!--
		<md-list-item>
			<md-button aria-label="SettingsApplications" class="md-icon-button" ng-click="toggleModelo()">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_settings_applications_black_48px.svg"></md-icon>
			</md-button>
		</md-list-item>-->

		<md-list-item>
			<md-button id="perro" aria-label="Download" class="md-icon-button" ng-click="exportarModeloJson()">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_file_download_black_48px.svg"></md-icon>
			</md-button>
		</md-list-item>


		<!--<md-list-item>
			<button class="joint-theme-modern joint-widget" id="btn-png" data-tooltip="Open as PNG in a pop-up" data-tooltip-position="top" data-tooltip-position-selector=".toolbar-container" data-type="button" data-name="png" >Export PNG</button>
		</md-list-item>-->



			<!--<md-button aria-label="Print"  class="md-grid-item-content">
				<md-icon md-svg-icon="dist/img/icons/other-icons/ic_print_black_48px.svg"></md-icon>
			</md-button>-->

			<span flex></span>
		<!-- </div> -->
	</md-list>
</section>

<div>

<!-- area del dibujo -->
<md-content layout="row" class="diag" ng-cloak>

	<!-- div del diagrama -->
	<div id="miDiagrama" layout="column" layout-align="top center" ng-init="crearModelo()">	</div>

	<!-- div con los mil sidenav -->
	<div ng-init="blocked = false">


		<!-- sidenav Enlace -->
		<md-sidenav class="md-sidenav-right md-whiteframe-4dp"  md-component-id='enlaceNav'>
			<md-toolbar class="md-theme-light">
				<h1 class="md-toolbar-tools">Enlace</h1>
			</md-toolbar>
			<md-content layout-padding layout="column">
				<form>
					<md-input-container>
						<label for="enlaceRotulo">RÃ³tulo</label>
						<input type="text" id="enlaceRotulo" ng-model="enlace.rotulo" ng-change="setRotuloEnlace()">
						<div ng-if="enlace.rotulo != ''">
							<md-checkbox  ng-model="enlace.mostrarRotulo" aria-label="MostrarRotulo" ng-change="setMostrarRotulo()">
							   Mostrar rÃ³tulo
							</md-checkbox>
						</div>
					</md-input-container>
					<md-input-container>
						<h2 class="md-title" >Tipo de enlace</h2>
						<md-radio-group ng-model="enlace.tipo" ng-change="cambiarTipoEnlace()">
							<md-radio-button value="pertenencia">Pertenencia</md-radio-button>
							<md-radio-button value="excepcion">ExcepciÃ³n</md-radio-button>
						</md-radio-group>
					</md-input-container>
				</form>
				<md-button ng-click="toggleEnlace()" class="md-primary" md-autofocus>
					Volver
				</md-button>
			</md-content>
		</md-sidenav>

		<!-- sidenav EstaciÃ³n -->
		<md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-component-id="condNav">
			<md-toolbar class="md-theme-light">
				<h1 class="md-toolbar-tools">Condicional</h1>
			</md-toolbar>
			<md-content layout-padding layout="column">
				<form>
					<div layout="column">

						<md-input-container>
							<label for="condID">ID Nova</label>
							<input type="text" id="condID" ng-model="cond.id" disabled="true">
						</md-input-container>

						<div>
							<h2 class="md-title" >Condicionales</h2>
							<md-table-container>
								<table md-table>
									 <thead md-head>
										<tr md-row>
											<th md-column>Variable</th>
											<th md-column>CondiciÃ³n</th>
											<th md-column>Valor</th>
										</tr>
									 </thead>
									 <tbody md-body>
										<tr md-row ng-repeat="x in condiciones">
											<td md-cell>{{x.var}}</td>
											<td md-cell>{{x.cond}}</td>
											<td md-cell>{{x.exp}}</td>
										</tr>
									</tbody>
								</table>
							</md-table-container>
						</div>
						<p></p>
						<div>
							<md-checkbox  ng-model="mostrarCondicionesEstacion" aria-label="mostrarCondicionesEstacion" ng-change="setMostrarCondicionesEstacion()">
								Mostrar condiciones
							</md-checkbox>
						</div>

						<div class="demo-md-panel-content" >
							<md-button class="md-secondary md-raised demo-dialog-open-button" ng-click="showPrompt($event)">
								Agregar condiciÃ³n
							</md-button>
						</div>

						<p></p>

						<h2 class="md-title" >Satisfacer</h2>
						<md-radio-group ng-model="cond.satisfacer" id="satisfacerT">
							<md-radio-button value="todas">Todas</md-radio-button>
							<md-radio-button value="alguna">Alguna</md-radio-button>
						</md-radio-group>

						<md-input-container>
							<label for="condDescripcion">DescripciÃ³n</label>
							<textarea type="text" id="condDescripcion" ng-model="cond.descripcion" ></textarea>
						</md-input-container>
					</div>
				</form>
				<md-button ng-click="toggleCondicional()" class="md-primary" md-autofocus>
					Volver
				</md-button>
			</md-content>
		</md-sidenav>

		<!-- sidenav Propiedades Mapa Conversacional  // md-disable-backdrop-->
		<md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-component-id="propertiesNav" md-is-locked-open="blocked" >
			<md-toolbar class="md-theme-light">
				<h1 class="md-toolbar-tools">Propiedades</h1>
			</md-toolbar>

			<md-tabs md-dynamic-height md-border-bottom>
				<md-tab label="General">
					<md-content layout-padding layout="column">
						<form>
							<md-input-container>
								<label for="nameModel">Nombre</label>
								<input type="text" id="nameModel" ng-model="model.name" md-autofocus>
							</md-input-container>
							<md-input-container>
								<label for="versionModel">VersiÃ³n</label>
								<input type="text" id="versionModel" ng-model="model.version" >
							</md-input-container>
							<md-input-container>
								<label for="duenoModel">DueÃ±o</label>
								<input type="text" id="duenoModel" ng-model="model.dueno" >
							</md-input-container>
							<md-input-container>
								<label for="disenadorModel">DiseÃ±ador</label>
								<input type="text" id="disenadorModel" ng-model="model.disenador">
							</md-input-container>
							<md-input-container>
								<label for="cpplModel">Ciclo principal</label>
								<input type="text" id="cpplModel" ng-model="model.cppl" disabled="true">
							</md-input-container>
							<md-input-container>
								<label for="descripcionModel">DescripciÃ³n</label>
								<textarea type="text" id="descripcionModel" ng-model="model.descripcion"></textarea>
							</md-input-container>
						</form>
						<md-button ng-click="toggleModelo()" class="md-primary">
							Volver
						</md-button>
					</md-content>
				</md-tab>

				<md-tab label="Variables">
					<md-content layout-padding ng-init="a = loadVariables()">
						<md-table-container>
							<table md-table>
								 <thead md-head>
									<tr md-row>
										<th md-column>Nombre</th>
										<th md-column>tipo</th>
										<th md-column>Largo</th>
										<th md-column>Formato</th>
										<th md-column>Valor inicial</th>
									</tr>
								 </thead>
								 <tbody md-body>
									<tr md-row ng-repeat="user in variables">

									<td md-cell>{{user.nombre}}</td>
									<td md-cell>{{user.tipo}}</td>
									<td md-cell>{{user.largo}}</td>
									<td md-cell>{{user.formato}}</td>
									<td md-cell>{{user.valorInicial}}</td>
									</tr>
								</tbody>
							</table>
						</md-table-container>

						<div class="demo-md-panel-content" >
							<md-button class="md-primary md-raised demo-dialog-open-button"
									   ng-click="showNewVar($event)">
								Agregar variable
							</md-button>
						</div>

						<md-button ng-click="toggleModelo()" class="md-primary">
							Volver
						</md-button>
					</md-content>
				</md-tab>
			</md-tabs>
		</md-sidenav>


		<!-- sidenav Ciclo conversacional -->
		<md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-component-id='CCNav' >
			<md-toolbar class="md-theme-light">
				<h1 class="md-toolbar-tools">Ciclo conversacional</h1>
			</md-toolbar>
			<md-content class="md-padding" layout="column">
				<form>
					<md-list class="md-3-line"   >
						<md-list-item >
								<md-input-container>
									<label for="nameWorkflow">Etiqueta del ciclo conversacional</label>
									<input type="text" id="nameWorkflow" ng-model="nombreCC" ng-change="setNombreCC()" md-autofocus>
								</md-input-container>
						</md-list-item>
						<md-list-item>
								<md-input-container>
									<label for="IDNova">ID Nova</label>
									<input type="text" id="IDNova" ng-model="idNovaCC" disabled="true" >
								</md-input-container>
						</md-list-item>

						<md-list-item >
							<div layout="row">

									<md-chips ng-model="rolCliente" md-autocomplete-snap  md-transform-chip="transformarChipRol($chip)" md-require-match="false" md-on-add="agregarRolCicloConv('cliente')" md-on-remove="eliminarRolCicloConv('cliente')" readonly="rolCliente.length >= 1" md-removable="true" md-separator-keys="customKeysChip" >
										<md-autocomplete md-selected-item="rolClienteSeleccionado" md-search-text="rolClienteBuscado" md-items="item in filterRoles(rolClienteBuscado)" md-item-text="item.name" placeholder="Cliente" >
											<span md-highlight-text="rolBuscado">{{item.name}}</span>
										</md-autocomplete>
										<md-chip-template>
											<span><strong>{{$chip.name}}</strong></span>
										</md-chip-template>
									</md-chips>

							</div>
						</md-list-item>

						<md-list-item >
							<div class="md-list-item-text" layout="row">

									<md-chips ng-model="rolRealizador" md-autocomplete-snap  md-transform-chip="transformarChipRol($chip)" md-require-match="false" md-on-add="agregarRolCicloConv('realizador')" md-on-remove="eliminarRolCicloConv('realizador')" readonly="rolRealizador.length >= 1" md-removable="true"  md-separator-keys="customKeysChip" >
										<md-autocomplete md-selected-item="rolRealizadorSeleccionado" md-search-text="rolRealizadorBuscado" md-items="item in filterRoles(rolRealizadorBuscado)" md-item-text="item.name" placeholder="Realizador">
											<span md-highlight-text="rolRealizadorBuscado">{{item.name}}</span>
										</md-autocomplete>
										<md-chip-template>
											<span><strong>{{$chip.name}}</strong></span>
										</md-chip-template>
									</md-chips>

							</div>
						</md-list-item>

						<md-list-item >
							<div  layout="column">
							<div class="md-list-item-text">

									<md-chips ng-model="rolObservador" md-autocomplete-snap  md-transform-chip="transformarChipRol($chip)" md-require-match="false" md-on-add="agregarRolCicloConv('observador')" md-on-remove="eliminarRolCicloConv('observador')" readonly="rolObservador.length >= 1" md-removable="true"  md-separator-keys="customKeysChip">
										<md-autocomplete md-selected-item="rolObservadorSeleccionado" md-search-text="rolObservadorBuscado" md-items="item in filterRoles(rolObservadorBuscado)" md-item-text="item.name" placeholder="Observador" >
											<span md-highlight-text="rolObservadorBuscado">{{item.name}}</span>
										</md-autocomplete>
										<md-chip-template>
											<span><strong>{{$chip.name}}</strong></span>
										</md-chip-template>
									</md-chips>

							</div>

						</div>
						</md-list-item>
						<md-list-item>
							<div >
								<md-checkbox  ng-model="mostrarRolObservador" aria-label="mostrarRolObservadorAria" ng-change="setMostrarRolObservador()">
								  Mostrar rol observador
								</md-checkbox>
							</div>
						</md-list-item>

						<!--	<md-divider></md-divider>	-->

						<md-list-item>
								<md-input-container>
									<label for="Descripcion">DescripciÃ³n</label>
									<textarea type="text" id="Descripcion" ng-model="descripcionCC" ng-change="agregarDescripcionCC()"></textarea>
								</md-input-container>
						</md-list-item>

					</md-list>
				</form>
				<md-button ng-click="toggleCC()" class="md-primary">
					Volver
				</md-button>
			</md-content>
		</md-sidenav>




		<!-- sidenav Condicional -->
		<md-sidenav class="md-sidenav-right md-whiteframe-4dp" md-component-id="condNav">
			<md-toolbar class="md-theme-light">
				<h1 class="md-toolbar-tools">Condicional</h1>
			</md-toolbar>
			<md-content layout-padding>
				<form>
					<div layout="column">

						<md-input-container>
							<label for="condID">ID Nova</label>
							<input type="text" id="condID" ng-model="cond.id" md-autofocus>
						</md-input-container>

						 <md-input-container>
							<b class="md-title" >Tipo </b>
							<md-radio-group ng-model="cond.tipo">
								<md-radio-button value="agregacion">AgregaciÃ³n</md-radio-button>
								<md-radio-button value="decision">DecisiÃ³n</md-radio-button>
							</md-radio-group>
						</md-input-container>

						<md-input-container>
							<b class="md-title" >Responsable</b>
							<md-radio-group ng-model="cond.responsable">
								<md-radio-button value="automatico">AutomÃ¡tico</md-radio-button>
								<md-radio-button value="rol">Rol</md-radio-button>
							</md-radio-group>
							<div ng-if=" cond.responsable == 'rol'">
								<div class="md-list-item-text" layout="row"  >
									<md-select  placeholder="Rol Cliente" ng-model="cond.rol" md-on-open="loadUsers()" style="min-width: 200px;">
										<md-option ng-value="user" ng-repeat="user in users">{{user.name}}</md-option>
									</md-select>
								</div>
							</div>

						</md-input-container>

						<md-divider></md-divider>

						<md-input-container>
							<b class="md-title" >Condicionales</b>

							<md-table-container>
								<table md-table>
									 <thead md-head>
										<tr md-row>
											<th md-column>Variable</th>
											<th md-column>CondiciÃ³n</th>
											<th md-column>ExpresiÃ³n</th>
										</tr>
									 </thead>
									 <tbody md-body>
										<tr md-row ng-repeat="x in condiciones">
										<td md-cell>{{x.var}}</td>
										<td md-cell>{{x.cond}}</td>
										<td md-cell>{{x.exp}}</td>
										</tr>
									</tbody>
								</table>
							</md-table-container>

							<div class="demo-md-panel-content" >
								<md-button class="md-primary md-raised demo-dialog-open-button" ng-click="showPrompt($event)">
									Agregar condiciÃ³n
								</md-button>
							</div>
						</md-input-container>
						<md-input-container>
							<b class="md-title" >Satisfacer</b>
							<md-radio-group ng-model="cond.satisfacer">
								<md-radio-button value="todas">Todas</md-radio-button>
								<md-radio-button value="alguna">Alguna</md-radio-button>
							</md-radio-group>
						</md-input-container>

						<md-divider></md-divider>

						<md-input-container>
							<label for="condDescripcion">DescripciÃ³n</label>
							<input type="text" id="condDescripcion" ng-model="cond.descripcion" >
						</md-input-container>
					</div>

				</form>
				<md-button ng-click="close()" class="md-primary">
					Volver
				</md-button>
			</md-content>
		</md-sidenav>
	</div>

</md-content>



</div>
